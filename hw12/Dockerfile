# Используйте официальный образ Go как базовый
FROM golang:1.18

# Установите рабочую директорию внутри контейнера
WORKDIR /app

# Скопируйте go.mod и go.sum в контейнер
COPY go.mod ./
COPY go.sum ./

# Установите Go зависимости
RUN go mod download

# Скопируйте исходный код в контейнер
COPY . .

# Соберите ваше приложение
RUN go build -o memcload ./memcload

# Установите права на выполнение для исполняемого файла
RUN chmod +x ./memcload

# По умолчанию, запускайте ваше приложение, когда стартует контейнер
CMD ["/app/memcload"]
